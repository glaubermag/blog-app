import{r as N,j as e,L as v}from"./index-z1Wx1FAE.js";import{u,E as b,g as q,a as C}from"./ErrorMessage-NQRgtwPX.js";import{P as R}from"./PostCard-Dvupw4e9.js";import{S as w,P as F}from"./Pagination-a_teGkuL.js";import{u as K}from"./useSearch-BClQQMSF.js";const o=9,U=()=>{const[n,i]=N.useState(1),{data:t,isLoading:m,error:x}=u({queryKey:["posts"],queryFn:()=>q()}),{data:r,isLoading:h,error:p}=u({queryKey:["users"],queryFn:()=>C(),enabled:!!t}),{searchQuery:c,setSearchQuery:d,searchResults:a,suggestions:P,isSearching:y,isLoading:f}=K({items:(t==null?void 0:t.data)||[],searchKeys:["title","body"],maxSuggestions:5,debounceMs:300}),j=s=>{d(s),i(1)};if(m||h)return e.jsx(v,{});if(x||p)return e.jsx(b,{message:"Erro ao carregar os posts. Por favor, tente novamente mais tarde."});const g=Math.ceil(a.length/o),l=(n-1)*o,S=a.slice(l,l+o);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Posts Recentes"}),e.jsx(w,{value:c,onChange:d,placeholder:"Buscar posts...",suggestions:P,onSuggestionSelect:j,isLoading:f})]}),a.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300","data-testid":"no-results",children:y?`Nenhum post encontrado com o termo "${c}"`:"Nenhum post encontrado"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(s=>{const L=r==null?void 0:r.find(E=>E.id===s.userId);return e.jsx(R,{post:s,author:L},s.id)})}),g>1&&e.jsx(F,{currentPage:n,totalPages:g,onPageChange:i})]})]})};export{U as default};
