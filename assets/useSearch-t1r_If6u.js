import{r}from"./index-BhK5uHJa.js";function w(e,s){const[f,c]=r.useState(e);return r.useEffect(()=>{const a=setTimeout(()=>{c(e)},s);return()=>{clearTimeout(a)}},[e,s]),f}function C({items:e,searchKeys:s,debounceMs:f=300,maxSuggestions:c=5}){const[a,S]=r.useState(""),[m,h]=r.useState(!1),[p,l]=r.useState(!1),t=w(a,f);r.useEffect(()=>{if(!t){h(!1),l(!1);return}h(!0),l(!0);const o=setTimeout(()=>{l(!1)},200);return()=>clearTimeout(o)},[t]);const E=r.useMemo(()=>{if(!t)return e;const o=t.toLowerCase().trim();return e.filter(i=>s.some(u=>{const n=i[u];return typeof n=="string"?n.toLowerCase().includes(o):!1}))},[e,s,t]),L=r.useMemo(()=>{if(!t)return[];const o=t.toLowerCase().trim(),i=new Set;return e.forEach(u=>{s.forEach(n=>{const d=u[n];typeof d=="string"&&d.toLowerCase().split(/\s+/).forEach(g=>{g.includes(o)&&g.length>o.length&&i.add(g)})})}),Array.from(i).sort((u,n)=>u.length-n.length).slice(0,c)},[e,s,t,c]);return{searchQuery:a,setSearchQuery:S,searchResults:E,suggestions:L,isSearching:m,isLoading:p}}export{C as u};
