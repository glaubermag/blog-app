import{j as e,c as S,r as w,L,a as A,g as E}from"./index-BB-g2y8g.js";import{u,E as C}from"./ErrorMessage-NxobcwJP.js";import{S as q,P as R}from"./Pagination-Cy-cTGlF.js";import{u as U}from"./useSearch-BAIxABh1.js";const F=({author:s,postCount:r})=>e.jsx("article",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 flex flex-col h-full","data-testid":"author-card",children:e.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl text-gray-600 dark:text-gray-300 font-medium",children:s.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.company.name})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",s.email]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Website:"})," ",s.website]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Posts:"})," ",r]})]}),e.jsx("div",{className:"mt-auto flex justify-end",children:e.jsx(S,{to:`/author/${s.id}`,className:"px-4 py-2 text-sm font-semibold text-blue-600 dark:text-blue-400 border border-blue-600 dark:border-blue-400 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200",children:"Ver Perfil"})})]})}),l=9,_=()=>{const[s,r]=w.useState(1),{data:a,isLoading:h,error:y}=u({queryKey:["users"],queryFn:()=>A()}),{data:n,isLoading:f}=u({queryKey:["posts"],queryFn:()=>E(),enabled:!!a});console.log("Posts:",n),console.log("Users:",a);const{searchQuery:i,setSearchQuery:d,searchResults:o,suggestions:j,isSearching:p,isLoading:b}=U({items:(a==null?void 0:a.data)||[],searchKeys:["name","email","company"],maxSuggestions:5,debounceMs:300}),N=t=>{d(t),r(1)};if(h||f)return e.jsx(L,{});if(y)return e.jsx(C,{message:"Erro ao carregar os autores. Por favor, tente novamente mais tarde."});const v=t=>{var g;const m=((g=n==null?void 0:n.data)==null?void 0:g.filter(k=>k.userId===t).length)||0;return console.log("Author:",t,"Post Count:",m),m},c=Math.ceil(o.length/l),x=(s-1)*l,P=o.slice(x,x+l);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Autores"}),e.jsx(q,{value:i,onChange:d,placeholder:"Buscar autores...",suggestions:j,onSuggestionSelect:N,isLoading:b})]}),o.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300","data-testid":"no-results",children:p?`Nenhum autor encontrado com o termo "${i}"`:"Nenhum autor encontrado"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(t=>e.jsx(F,{author:t,postCount:v(t.id)},t.id))}),c>1&&e.jsx(R,{currentPage:s,totalPages:c,onPageChange:r})]})]})};export{_ as default};
